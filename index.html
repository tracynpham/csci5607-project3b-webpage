<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>CSCI 5607 Project 3B</title>
</head>
<body>
    <header><img id="headerimage" src="images/gifs/headerimage3.gif"></header>
    <main>
        <h1>showcase of project 3b: ray tracing 2</h1>
        <h3>by tracy pham and mary duong</h3>
        <h2>sample scenes</h2>

        <div class="images">
            <div class="image-row">
                <div class="image-container">
                    <h4>spheres2.txt</h4>
                    <img src="images/png/spheres2.png" alt="sphere 2"/>
                </div>
                <div class="image-container">
                    <h4>bear.txt</h4>
                    <img src="images/png/bear.png" alt="bear">
                </div>
                <div class="image-container">
                    <h4>outdoor.txt</h4>
                    <img src="images/png/outdoor.png" alt="outdoor"/>
                </div>
                <div class="image-container">
                    <h4>test_reasonable.txt</h4>
                    <img src="images/png/foo.png" alt="foo"/>
                </div>
                <div class="image-container">
                    <h4>bottle.txt</h4>
                    <img src="images/png/bottle.png" alt="bottle">
                </div>
                <div class="image-container">
                    <h4>arm-reach.txt</h4>
                    <img src="images/png/reachingHand.png" alt="arm-reach">
                </div>
                <div class="image-container">
                    <h4>arm-top.txt</h4>
                    <img src="images/png/arm.png" alt="arm-top">
                </div>
                <div class="image-container">
                    <h4>dragon.txt</h4>
                    <img src="images/png/dragon.png" alt="Dragon">
                </div>
            </div>
        </div>

        <h2>basic features</h2>
        <!-- feature 1 -->
        <div>
            <p>
                1. camera placement, changing in x, y, and z coordinates
            </p>
            <!-- x change -->
            <div class="image-row">
                <div class="image-container">
                    <small> original camera position (-4, 2, -3)</small>
                    <img src="images/png/camera_pos.png" alt="original">
                </div>
                <div class="image-container">
                    <small> (-6, 2, -3) </small>
                    <img src="images/png/camera_posxL.png" alt="left">
                </div>
                <div class="image-container">
                    <small> (-2, 2, -3) </small>
                    <img src="images/png/camera_posxR.png" alt="right">
                </div>
            </div>
            <br>
            <!-- y change -->
            <div class="image-row">
                <div class="image-container">
                    <small> original camera position </small>
                    <img src="images/png/camera_pos.png" alt="original">
                </div>
                <div class="image-container">
                    <small> (-4, 4, -3) </small>
                    <img src="images/png/camera_posyU.png" alt="up"> 
                </div>
                <div class="image-container">
                    <small> (-4, 1, -3) </small>
                    <img src="images/png/camera_posyB.png" alt="down">
                </div>
            </div>
            <!-- z change -->
            <div class="image-row">
                <div class="image-container">
                    <small> original camera position </small>
                    <img src="images/png/camera_pos.png" alt="original">
                </div>
                <div class="image-container">
                    <small> (-4, 2, -6) </small>
                    <img src="images/png/camera_posz1.png">
                </div>
                <div class="image-container">
                    <small> (-4, 2, 0) </small>
                    <img src="images/png/camera_posz2.png">
                </div>
            </div>
        </div>

        <br>
        <!-- feature 2 -->
        <div>
            <p>
                2. film resolution & aspect ratio (in 300x300, 300x500, and 1000x200)
            </p>
            <img src="images/png/film_res1.png" alt="300x300">
            <img src="images/png/film_res2.png" alt="300x500">
            <img src="images/png/film_res3.png" alt="1000x200">
        </div>
        
        <br>
        <!-- feature 3 -->
        <div>
            <p>
                3. user specified background colors 
            </p>
            <div class="image-row">
                <div class="image-container">
                    <small> black background </small>
                    <img src="images/png/bg_color.png">
                </div>
                <div class="image-container">
                    <small> orange background </small>
                    <img src="images/png/bg_color1.png">
                </div>
                <div class="image-container">
                    <small> blue background </small>
                    <img src="images/png/bg_color2.png">
                </div>
                <div class="image-container">
                    <small> pink background </small>
                    <img src="images/png/bg_color3.png">
                </div>
            </div>
        </div>

        <!-- feature 4 -->
        <div>
            <p>
                4. lighting
            </p>
            <div class="image-row">
                <div class="image-container">
                    <small>ambient lighting only</small>
                    <img src="images/png/light_a.png">
                </div>
                <div class="image-container">
                    <small>point lighting only</small>
                    <img src="images/png/light_p.png">
                </div>
                <div class="image-container">
                    <small>directional lighting only</small>
                    <img src="images/png/light_d.png">
                </div>
                <div class="image-container">
                    <small>mix of all 3</small>
                    <img src="images/png/light_m.png">
                </div>
            </div>
        </div>

        <!-- feature 5 -->
        <div>
            <p>
                5. spheres (multiple spheres in scene)
            </p>
            <img src="images/png/sphere.png" alt="multi sphere">
        </div>
        
        <!-- feature 6 -->
        <h5>other basic features displayed in scenes</h5>
        <ul>
            <li>triangles (both with and without vertex normals)</li>
            <li>shadows</li>
            <li>reflections and refractions</li>
            <li>recursion to a bounded depth</li>
        </ul>
        <h2>additional features implemented</h2>
        <div>
            <p>
              1. spot light (5 points)
            </p>
            <div class="image-row">
                <div class="image-container">
                    <small>example from spot_sphere.txt</small>
                    <img src="images/png/raytraced.png">
                </div>
            </div>
        </div>
        <div>
            <p>
                2. parallelism (10 points)
            </p>
            <br>
            <small> How to compile and run this on Visual Studio Code on MacOS and Windows: g++-15 -fopenmp -std=c++14 rayTrace_vec3.cpp -o ray</small>
            <br>
            <small> How to compile and run on Visual Studio 2022: 
                <ol>
                    <li>make sure configuration is on active (release) </li>
                    <li>Project Properties > Configuration Properties > C/C++ > Change Open MP Support to <strong>Yes (/openmp)</strong></li>
                    <li>Configuration Properties > Debugging > Include .txt file names in <strong>Command Arguments</strong></li>
                </ol>
            </small>
            <div class="image-row">
                <div class="image-container">
                    <small>speed up for spheres2.txt</small>
                    <img src="images/png/parallel_2.png">
                </div>
                <div class="image-container">
                    <small> speed up for arm-top.txt, cut from 14ish minutes to 5 minutes</small>
                    <img src="images/png/parallel_1.png">
                </div>
                <div class="image-container">
                    <small> speed up for arm-reach.txt, cut from 10+ minutes to 54 seconds </small>
                    <img src="images/png/parallel_4.png">
                </div>
                <div class="image-container">
                    <small> speed up for dragon.txt, cut from hours (maybe even days) to 10 minutes </small>
                    <small> (did not include serial rendering due to <strong>VERY</strong> large file size)</small>
                    <img src="images/png/parallel_3.png">
                </div>
            </div>
        </div>
    </main> 

    <h2>difficulties we encountered</h2>
    <p id="difficulties"> 
        One of the strengths of our project was that many core features were already implemented from the previous iteration. For example, we had reflection, recursion to a bounded depth and shadow rendering. During this phase, we focused on fixing our refraction. 
        After attending office hours, we realized we were using the Beer-Lambert law and Schlick's approximation incorrectly, which caused the refracted surfaces to appear wrong. Once we got rid of that portion of the code, the refractions looked much more realistic. We also 
        discovered that our reflection contribution wasn't being multiplied by the specular component of the material, which affected highlights. Fixing that improved the overall lighting. For the remaining base requirements, we added directional lighting and triangle rendering. 
        Tracy handled the directional light, which was straightforward to implement. Triangles, however, were more challenging since we needed to dynamically allocate memory and handle both regular and smooth (normal) triangles.
    </p>
    <p id="difficulties">
         One of the biggest challenges was implementing barycentric 
        coordinates for triangle intersection. Thankfully, we reviewed the lecture slides, and Tracy found a helpful online guide that we were able to reference for our implementation. When we first rendered the arm-reach.txt and bottle.txt scenes, we noticed 
        that the normals were incorrect, causing the surfaces to look rigid. After fixing the normal calculations, our rendered results closely matched the expected output. Another difficulty we encountered was avoiding segmentation faults in complex scenes with many triangles. Initially, 
        I tried dynamically allocating memory for all triangles but couldn't get it stable. To resolve this, I defined a constant MAX_TRIANGLES and set it to 10,500, which eliminated the crashes. Then, I (Mary), implementated the spot light and parallelism for our bonus features.
    </p>

    <h2>halloween costume!!!</h2>
    <p>i (tracy) dressed up as rapunzel and flynn rider with my boyfriend :3</p>
    <div class="image-row">
        <div class="image-container">
            <img src="images/png/halloween.png">
        </div>
    </div>
    <a href="https://github.com/tracynpham/csci5607-project3b-webpage/blob/main/project/project3b.zip">
        link to download project files
    </a>
</body>
</html>